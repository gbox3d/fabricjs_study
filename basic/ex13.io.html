<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="../libs/fabric.js" ></script>
</head>
<body>

<canvas id="main-canvas" width="256" height="256"  ></canvas>

<textarea id="output" >

</textarea>

<div>

    <button id="save">save</button>
    <button id="load">load</button>
    <button id="clear">clear</button>
</div>

<script>

    //https://stackoverflow.com/questions/21177934/reset-canvas-and-reload-with-json-in-fabric-js

    console.log(fabric.version)

    var fbCanvas =  new fabric.Canvas('main-canvas', {
        backgroundColor : '#a278ff',
        enableRetinaScaling : false //레티나 비활성화
    })

    // create a rectangle object
    var rect = new fabric.Rect({
        left: 100,
        top: 100,
        fill: '#ff0000',
        width: 64,
        height: 64
    });

    // "add" rectangle onto canvas
    fbCanvas.add(rect);


    document.querySelector('button#save').addEventListener('click',()=> {
        console.log(fbCanvas.toJSON())
        document.querySelector('#output').value = JSON.stringify(fbCanvas)

    });

    document.querySelector('button#load').addEventListener('click',()=> {
        // console.log(fbCanvas.toJSON())
        let _json = document.querySelector('#output').value;

        fbCanvas.loadFromJSON(_json)

    });


    document.querySelector('button#clear').addEventListener('click',()=> {
        fbCanvas.clear()

    });


</script>




</body>
</html>